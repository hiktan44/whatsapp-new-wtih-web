{
  "meta": {
    "project": "WhatsApp Yoncu Panel",
    "date": "2025-12-10",
    "prepared_by": "Generated by Vibe Coding AI"
  },
  "product_overview": "WhatsApp Yoncu Panel is a modern, full-stack platform designed to facilitate WhatsApp messaging and campaign management through two main channels: Business API (YoncuAPI) and WhatsApp Web/Desktop. It enables users, especially admins, to authenticate securely, manage contacts and groups, create personalized message templates, and run campaigns with advanced compliance, rate limiting, and reporting features via an intuitive web UI built with Next.js and React.",
  "core_goals": [
    "Enable secure admin access and session management via QR code for WhatsApp Web integration.",
    "Provide an easy-to-use interface to manage contacts, groups, templates, and campaigns.",
    "Allow campaign creation with personalized message templates, media attachments, and preview before sending.",
    "Implement compliance checks including consent verification, blacklist filtering, and ban-risk mitigation for safe message sending.",
    "Support detailed, real-time reporting and analytics on message delivery and campaign performance.",
    "Facilitate seamless import/export of contacts via CSV and WhatsApp contact retrieval via WhatsApp Web session.",
    "Ensure a responsive, performant, and user-friendly web experience using modern technologies like Tailwind CSS, Radix UI, and Framer Motion."
  ],
  "key_features": [
    "Admin authentication with secure login and session handling.",
    "Dashboard with statistics, queue display, and navigation.",
    "WhatsApp Web session management with QR code connection, reset, and logout.",
    "Fetching and exporting WhatsApp contacts and groups as CSV files.",
    "Campaign CRUD operations with preview, send, pause, resume, and detailed reporting.",
    "Compliance and ban-risk checks including consent validation and blacklist management.",
    "Contact management with manual entry, bulk CSV import, and phone number format normalization.",
    "Group management with group creation, multi-selection addition/removal of contacts, and statistics.",
    "Message template system supporting placeholders for personalization and media attachments up to 50MB.",
    "Single and bulk message sending with support for manual numbers, group selection, and rate limiting profiles.",
    "Real-time message queue and history tracking with success/failure reporting.",
    "Responsive UI with dark/light mode, toast notifications, and smooth animations for enhanced user experience."
  ],
  "user_flow_summary": [
    "Admin logs in at the login page using credentials and accesses the dashboard.",
    "Admin navigates to the WhatsApp Web Session page and initiates connection by scanning a QR code.",
    "Admin fetches contacts and groups from WhatsApp Web session to populate the system database.",
    "Admin imports or adds contacts manually, ensuring consent is recorded and valid.",
    "Admin creates a new campaign by selecting channel (WhatsApp Web/Desktop), defining message template with placeholders and optionally attaching media.",
    "Admin previews the campaign messages with personalized content and compliance checks.",
    "Admin starts the campaign send process with rate limiting based on selected speed profile to avoid bans.",
    "Admin monitors campaign progress and views real-time reports detailing sends, successes, failures, and feedback such as STOP requests.",
    "Admin uses group management and contact filters to organize recipients efficiently.",
    "Admin logs out or resets WhatsApp Web session as needed for maintenance or troubleshooting."
  ],
  "validation_criteria": [
    "Admin login only succeeds with valid credentials and maintains session securely.",
    "QR code appears correctly and updates for WhatsApp Web session connection; connection status reflects accurately.",
    "Contacts and groups fetched from WhatsApp Web are displayed and exported correctly as CSV files.",
    "Campaigns can be created, previewed with personalized placeholders, paused, resumed, and deleted without errors.",
    "Message sending respects opt-in consent, blacklist filtering, and speed profiles preventing ban risks.",
    "Reports reflect accurate, real-time data on message sending success, failure, and recipient feedback.",
    "CSV import correctly parses contacts with robust error handling and phone number normalization.",
    "UI components respond correctly to user interactions and adapt to device screen sizes with dark and light theme support.",
    "Rate limiting enforces sending speeds configured per campaign and respects restrictions.",
    "Error states such as QR code not showing, lost connections, message sending failures, and database errors are handled gracefully with user-friendly messages."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Next.js 14 (App Router)",
      "React 18",
      "Supabase (PostgreSQL, supabase-js)",
      "Tailwind CSS + Radix UI (shadcn/ui) + Framer Motion",
      "whatsapp-web.js + Puppeteer + qrcode",
      "Zod",
      "Zustand",
      "PapaParse"
    ],
    "features": [
      {
        "name": "Auth - Login",
        "description": "Admin kullanıcı ile giriş sayfası ve oturum açma akışı.",
        "files": [
          "app/(auth)/login/page.tsx",
          "app/api/auth/login/route.ts"
        ]
      },
      {
        "name": "Dashboard",
        "description": "Panel ana sayfa, istatistik/queue gösterimi ve navigasyon.",
        "files": [
          "app/(dashboard)/dashboard/page.tsx",
          "components/layout/sidebar.tsx"
        ]
      },
      {
        "name": "WhatsApp Web Session - UI",
        "description": "WA Web oturum ekranı: bağlan/reset/QR gösterimi, kişi/grup çekme, export.",
        "files": [
          "app/(dashboard)/dashboard/wa-web-session/page.tsx"
        ]
      },
      {
        "name": "WhatsApp Web Session - Service",
        "description": "whatsapp-web.js client yönetimi, QR üretimi, session lifecycle ve gönderim yardımcıları.",
        "files": [
          "lib/wa-web-service.ts"
        ]
      },
      {
        "name": "WhatsApp Web Session - DB helpers",
        "description": "Supabase üzerinden wa_web_sessions state/qr/status güncelleme ve reset/silme yardımcıları.",
        "files": [
          "lib/db/wa-web-sessions.ts"
        ]
      },
      {
        "name": "WA Web Session - API routes",
        "description": "connect/qr/status/logout/reset + contacts/groups/export endpoint'leri.",
        "files": [
          "app/api/wa-web/connect/route.ts",
          "app/api/wa-web/qr/route.ts",
          "app/api/wa-web/status/route.ts",
          "app/api/wa-web/logout/route.ts",
          "app/api/wa-web/reset/route.ts",
          "app/api/wa-web/contacts/route.ts",
          "app/api/wa-web/groups/route.ts",
          "app/api/wa-web/export-contacts/route.ts"
        ]
      },
      {
        "name": "Campaigns - API",
        "description": "Kampanya CRUD, preview, send/pause/resume ve rapor endpoint'leri.",
        "files": [
          "app/api/campaigns/route.ts",
          "app/api/campaigns/[id]/route.ts",
          "app/api/campaigns/[id]/preview/route.ts",
          "app/api/campaigns/[id]/send/route.ts",
          "app/api/campaigns/[id]/pause/route.ts",
          "app/api/campaigns/[id]/resume/route.ts",
          "app/api/campaigns/[id]/report/route.ts",
          "lib/db/campaigns.ts"
        ]
      },
      {
        "name": "Contacts import - CSV only",
        "description": "CSV dosyasından kişi içe aktarma ve şablon indirme.",
        "files": [
          "components/contacts/csv-import.tsx",
          "lib/csv-parser.ts"
        ]
      },
      {
        "name": "Compliance & Ban-risk checks (MVP)",
        "description": "STOP/blacklist, içerik kalite kontrolleri, hız profilleri.",
        "files": [
          "lib/compliance-service.ts",
          "lib/db/blacklist.ts"
        ]
      }
    ]
  }
}
